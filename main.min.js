function startGame(){$("#game").show(),disableSelect(),$("#inputs *").attr("disabled",null),$("#four-checkbox").checked?(mode=4,chances=15,answer=Array.from(generateNotRepeat(4)),$("#number5").hide(),$("#number6").hide()):$("#six-checkbox").checked&&(mode=6,chances=20,answer=Array.from(generateNotRepeat(6)),$("#number5").show(),$("#number6").show()),$("#about").innerText="guess!",$("#output").textContent="",$("#one-allcorrect").innerText="0",$("#one-onecorrect").innerText="0",$("#chances").innerText=chances,$("#number1").focus()}function forward(e){$(`#number${e+1}`).focus()}function back(e){$(`#number${e-1}`).focus()}function processError(e,t){$(`#number${t}`).value="",$(`#number${t}`).css("outline","solid 3px crimson"),$("#errors").css("font-weight","bold"),$("#errors").innerText=e,setTimeout(e=>{$(`#number${t}`).css("outline",null),$("#errors").innerText="目前无错误",$("#errors").css("font-weight",null)},1e3)}function checkRepeat(){var e=getNonEmptyInputArray(),t=new Set(e);return e.length!==t.size}function getInputArray(){return[$("#number1").value,$("#number2").value,$("#number3").value,$("#number4").value,$("#number5").value,$("#number6").value]}function getNonEmptyInputArray(){return getInputArray().filter(e=>""!==e)}function checkAnswer(){var e=getNonEmptyInputArray(),t=0,r=0;for(let n=0;n<answer.length;n++)for(let a=0;a<e.length;a++)answer[n]==e[a]&&(t++,n==a&&r++);return[t,r]}function disableSelect(){$("#four-checkbox").attr("disabled",""),$("#six-checkbox").attr("disabled",""),$("#start-game").attr("disabled","")}function enableSelect(){$("#four-checkbox").attr("disabled",null),$("#six-checkbox").attr("disabled",null),$("#start-game").attr("disabled",null)}function generateNotRepeat(e){for(var t=new Set,r="";;)if(t.add((9*Math.random()).toFixed(0).toString()),t.size==e)return t.forEach(e=>{r+=e}),r}function about(){toggledAbout?$("#about").innerText="guess!":$("#about").innerHTML="\n        经典复刻计划之猜数游戏<br />\n        由 LJM12914 制作。<br />\n        <a target='_blank' href='https://github.com/ljm12914/guess'>https://github.com/ljm12914/guess</a>\n    ",toggledAbout=!toggledAbout}void 0!==navigator.serviceWorker&&navigator.serviceWorker.register("serviceworker.js");var answer,mode=4,chances=0;$("#inputs *").attr("type","text"),$("#inputs *").attr("maxlength","1"),$.Events($("#inputs *"),"keydown",e=>{var t=parseInt(e.target.id[6]);"Backspace"==e.key&&""===$(`#number${t}`).value&&1!=t&&back(t)}),$.Events($("#inputs *"),"input",e=>{var t=parseInt(e.target.id[6]);if(""!==$(`#number${t}`).value)if(isNaN(parseInt($(`#number${t}`).value)))processError("输入的值不是数字",t);else if(checkRepeat())processError("输入的值不能重复",t);else if(getNonEmptyInputArray().length==mode){var r=checkAnswer();chances--,$("#output").textContent+=`${getNonEmptyInputArray().join("")} - ${r[1]}个位置与数值均相同的答案，${r[0]}个数值相同的答案\n`,$("#one-allcorrect").innerText=r[1],$("#one-onecorrect").innerText=r[0],$("#chances").innerText=chances,$("#number1").value=$("#number2").value=$("#number3").value=$("#number4").value=$("#number5").value=$("#number6").value="",r[1]==mode?($("#inputs *").attr("disabled",""),$("#about").innerText="你成功了！",enableSelect()):0==chances?($("#inputs *").attr("disabled",""),$("#about").innerText="机会已用尽，祝你下次好运！",enableSelect()):$("#number1").focus()}else t!=mode&&forward(t);else 1!=t&&back(t)});var toggledAbout=!1;